# `hitIdTracker`

This guide explains what the `hitIdTracker` plugin is and how to integrate it into your `analytics.js` tracking implementation.

## Overview

When using Google Analytics to store data about different types of user interactions on your site, from pageviews, to custom events, to ecommerce transactions, Google Analytics does not provide an unique identifier to distinguish one interaction from another, which is specially when exporting data from Google Analytics for analysis outside of it. This plugin solves this problem by automatically generating and assigning a tiny, secure, URL-friendly, unique string ID to every user interaction tracked on your site.

### How it works

The `hitIdTracker` plugin works by relying on the [GaTaskManager plugin](https://github.com/anki/ga-task-manager) to add a function to the Google Analytics Tasks API's [`customTask`](https://developers.google.com/analytics/devguides/collection/analyticsjs/tasks) execution. This function sets a Custom Dimension (which you specify) with a an url-friendly 21-character uuid value generated with the [Nano ID](https://github.com/ai/nanoid) library.

## Usage

### Pre-requisites
#### Install the GaTaskManager plugin.

You must `require` the [GaTaskManager plugin](https://github.com/anki/ga-task-manager) *before* requiring the `hitIdTracker` plugin.

#### Configure a Custom Dimension

You must configure a Custom Dimension with `Hit` scope and reserve it for the IDs which will be automatically generated by the `hitIdTracker` plugin. I suggest you name this Custom Dimension "Hit ID".

### Enable & Usage

To enable the `hitIdTracker` plugin, run the [`require`](https://developers.google.com/analytics/devguides/collection/analyticsjs/using-plugins) command, specify the plugin name `'hitIdTracker'`, and pass in the Custom Dimension index on which you want the Hit IDs to be stored:

```js
ga('require', 'hitIdTracker', {customDimensionIndex: <number>});
```

**Note:**  Requiring the plugin without first requiring the [GaTaskManager plugin](https://github.com/anki/ga-task-manager) will result in an error.

## Options

The `hitIdTracker` plugin takes one *required* option, `customDimensionIndex` which should be a `number` equal to the index of the hit-scoped Custom Dimension configured to store the Hit IDs.

**Note:** There's no default value. Requiring the plugin without providing `{customDimensionIndex: <number>}` when calling [`require`](https://developers.google.com/analytics/devguides/collection/analyticsjs/using-plugins) will result in an error.


## Methods

The following table lists all methods for the `hitIdTracker` plugin:

| Method Name   | Description   |
| ------------- | ----------------------------------------------------------------- |
| `remove`      | Removes the `hitIdTracker` plugin from the specified tracker and removes the Custom Dimension setting function from [GaTaskManager plugin](https://github.com/anki/ga-task-manager) |

For details on how `analytics.js` plugin methods work and how to invoke them, see [calling plugin methods](https://developers.google.com/analytics/devguides/collection/analyticsjs/using-plugins#calling_plugin_methods) in the `analytics.js` documentation.
